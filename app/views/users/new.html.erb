<%= form_with model: @user, url:users_create_path do |form| %>
  <% if params[:user] == "sponsor" %>
    <%= render partial: "new_sponsor", locals: {form: form} %>
  <% elsif params[:user] == "student" %>
    <%= render partial: "new_student", locals: {form: form} %>
  <% end %>
  <div>
    <%= form.label "Name", class: "form_label" %><br>
    <%= form.text_field :name, class: "form_text" %>
    <%= render partial: "shared/error_display", locals: {errors: @user.errors.messages[:name]} %><br>
    <%= form.label "Username", class: "form_label" %><br>
    <%= form.text_field :username, class: "form_text" %>
    <%= render partial: "shared/error_display", locals: {errors: @user.errors.messages[:username]} %><br>
    <%= form.label "Email", class: "form_label" %><br>
    <%= form.text_field :email, class: "form_text" %>
    <%= render partial: "shared/error_display", locals: {errors: @user.errors.messages[:email]} %><br>
    <%= form.label "Contact Information (This will be publicly available)", class: "form_label" %><br>
    <%= form.text_field :contact, class: "form_text" %>
    <%= render partial: "shared/error_display", locals: {errors: @user.errors.messages[:contact]} %><br>
    <%= form.label "Password", class: "form_label" %><br>
    <%= form.text_field :password, class: "form_text" %>
    <%= render partial: "shared/error_display", locals: {errors: @user.errors.messages[:password]} %><br>
    <%= form.label "Password Confirmation", class: "form_label" %><br>
    <%= form.text_field :password_confirmation, class: "form_text" %>
    <%= render partial: "shared/error_display", locals: {errors: @user.errors.messages[:password_confirmation]} %><br>
    <%= form.label "Domains of Experience/Interest", class: "form_text" %>
    <div style="width:40rem">
      <%= form.collection_select :domains, Domain.all, :id, :name, {}, {multiple: true, class: "form-select", id: "collection-select", data: { controller: "choices" }} %>
    </div>
    <%= form.submit "Sign Up", {class:"submit_button"} %>
  </div>
<% end %>
